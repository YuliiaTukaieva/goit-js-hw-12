{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45147494-75a7f96365cbfb286af0bc26b';\nconst BASE_URL = 'https://pixabay.com/api/?';\n\nexport async function fetchImages(query, page, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(images, gallery) {\n    const markup = images.map(image => `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </div>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    const lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    lightbox.refresh();\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loadingIndicator = document.querySelector('.loading');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15;\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    currentQuery = e.target.elements.query.value.trim();\n    currentPage = 1;\n    gallery.innerHTML = '';\n    loadMoreButton.classList.add('hidden');\n    if (currentQuery === '') {iziToast.error({ position: 'topRight', messageColor:  'white', backgroundColor: 'red', title: 'Error', message: 'Search field cannot be empty!',\n});\nreturn;\n}\n\n    await handleFetchImages();\n});\n\nloadMoreButton.addEventListener('click', handleFetchImages);\n\nasync function handleFetchImages() {\n    try {\n        loadingIndicator.classList.remove('hidden');\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n\n        if (data.hits.length === 0 && currentPage === 1) {\n            iziToast.warning({position: 'topRight', messageColor:  'white', backgroundColor: 'Maroon',\n                title: 'Warning',\n                message: 'No images found. Please try another query.',\n              });\n            return;\n        }\n\n        renderImages(data.hits, gallery);\n        currentPage += 1;\n\n        if (currentPage > Math.ceil(data.totalHits / perPage)) {\n            loadMoreButton.classList.add('hidden');\n            iziToast.info({position: 'topRight', messageColor:  'white', backgroundColor: `Cyan`,\n                title: 'Info',\n                message: \"We're sorry, but you've reached the end of search results.\",\n              });\n            \n        } else {\n            loadMoreButton.classList.remove('hidden');\n        }\n\n\n        smoothScroll();\n    } catch (error) {\n        if (!error.response) {\n                iziToast.error({position: 'topRight', messageColor:  'white', backgroundColor: 'Salmon',\n                title: 'Error',\n                message: 'NETWORK error. Please check your internet connection and try again.',\n                });\n            } else {\n                iziToast.error({position: 'topRight', messageColor:  'white', backgroundColor: 'Salmon',\n                title: 'Error',\n                message: 'An error occurred. Please try again.',\n            });\n        }\n    } finally {\n        loadingIndicator.classList.add('hidden');\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderImages","images","gallery","markup","image","SimpleLightbox","form","loadMoreButton","loadingIndicator","currentPage","currentQuery","e","iziToast","handleFetchImages","data","smoothScroll","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,4BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAU,GAAI,CACzD,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACb,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCpBO,SAASC,EAAaC,EAAQC,EAAS,CAC1C,MAAMC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,oDAGdA,EAAM,KAAK;AAAA,oDACXA,EAAM,KAAK;AAAA,uDACRA,EAAM,QAAQ;AAAA,wDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGlE,EAAE,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,EAC7B,IAAIE,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACnF,QAAO,CACpB,CCfA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CJ,EAAU,SAAS,cAAc,UAAU,EAC3CK,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAmB,SAAS,cAAc,UAAU,EAE1D,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMb,EAAU,GAEhBS,EAAK,iBAAiB,SAAU,MAAOK,GAAM,CAMzC,GALAA,EAAE,eAAc,EAChBD,EAAeC,EAAE,OAAO,SAAS,MAAM,MAAM,OAC7CF,EAAc,EACdP,EAAQ,UAAY,GACpBK,EAAe,UAAU,IAAI,QAAQ,EACjCG,IAAiB,GAAI,CAACE,EAAS,MAAM,CAAE,SAAU,WAAY,aAAe,QAAS,gBAAiB,MAAO,MAAO,QAAS,QAAS,+BAC9I,CAAC,EACD,MACA,CAEI,MAAMC,EAAiB,CAC3B,CAAC,EAEDN,EAAe,iBAAiB,QAASM,CAAiB,EAE1D,eAAeA,GAAoB,CAC/B,GAAI,CACAL,EAAiB,UAAU,OAAO,QAAQ,EAC1C,MAAMM,EAAO,MAAMpB,EAAYgB,EAAcD,EAAaZ,CAAO,EAEjE,GAAIiB,EAAK,KAAK,SAAW,GAAKL,IAAgB,EAAG,CAC7CG,EAAS,QAAQ,CAAC,SAAU,WAAY,aAAe,QAAS,gBAAiB,SAC7E,MAAO,UACP,QAAS,4CACzB,CAAe,EACH,MACH,CAEDZ,EAAac,EAAK,KAAMZ,CAAO,EAC/BO,GAAe,EAEXA,EAAc,KAAK,KAAKK,EAAK,UAAYjB,CAAO,GAChDU,EAAe,UAAU,IAAI,QAAQ,EACrCK,EAAS,KAAK,CAAC,SAAU,WAAY,aAAe,QAAS,gBAAiB,OAC1E,MAAO,OACP,QAAS,4DACzB,CAAe,GAGHL,EAAe,UAAU,OAAO,QAAQ,EAI5CQ,GACH,OAAQhB,EAAO,CACPA,EAAM,SAMHa,EAAS,MAAM,CAAC,SAAU,WAAY,aAAe,QAAS,gBAAiB,SAC/E,MAAO,QACP,QAAS,sCACzB,CAAa,EARGA,EAAS,MAAM,CAAC,SAAU,WAAY,aAAe,QAAS,gBAAiB,SAC/E,MAAO,QACP,QAAS,qEACzB,CAAiB,CAOjB,QAAc,CACNJ,EAAiB,UAAU,IAAI,QAAQ,CAC1C,CACL,CAEA,SAASO,GAAe,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAKd,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACZ,IAAKc,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}