{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '45147494-75a7f96365cbfb286af0bc26b';\nconst BASE_URL = 'https://pixabay.com/api/?';\n\nexport async function fetchImages(query, page, perPage = 15) {\n    try {\n        const response = await axios.get(BASE_URL, {\n            params: {\n                key: API_KEY,\n                q: query,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page,\n                per_page: perPage,\n            },\n        });\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        throw error;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport function renderImages(images, gallery) {\n    const markup = images.map(image => `\n        <div class=\"photo-card\">\n            <a href=\"${image.largeImageURL}\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n            </a>\n            <div class=\"info\">\n                <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n                <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n                <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n                <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n            </div>\n        </div>\n    `).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n    const lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt', captionDelay: 250 });\n    lightbox.refresh();\n}","import { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loadMoreButton = document.querySelector('.load-more');\nconst loadingIndicator = document.querySelector('.loading');\n\nlet currentPage = 1;\nlet currentQuery = '';\nconst perPage = 15;\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    currentQuery = e.target.elements.query.value.trim();\n    currentPage = 1;\n    gallery.innerHTML = '';\n    loadMoreButton.classList.add('hidden');\n    if (currentQuery === '') return;\n\n    await handleFetchImages();\n});\n\nloadMoreButton.addEventListener('click', handleFetchImages);\n\nasync function handleFetchImages() {\n    try {\n        loadingIndicator.classList.remove('hidden');\n        const data = await fetchImages(currentQuery, currentPage, perPage);\n\n        if (data.hits.length === 0 && currentPage === 1) {\n            alert('No images found. Please try a different query.');\n            return;\n        }\n\n        renderImages(data.hits, gallery);\n        currentPage += 1;\n\n        if (currentPage > Math.ceil(data.totalHits / perPage)) {\n            loadMoreButton.classList.add('hidden');\n            alert(\"We're sorry, but you've reached the end of search results.\");\n        } else {\n            loadMoreButton.classList.remove('hidden');\n        }\n\n        smoothScroll();\n    } catch (error) {\n        console.error(error);\n    } finally {\n        loadingIndicator.classList.add('hidden');\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderImages","images","gallery","markup","image","SimpleLightbox","form","loadMoreButton","loadingIndicator","currentPage","currentQuery","e","handleFetchImages","data","smoothScroll","cardHeight"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,4BAEV,eAAeC,EAAYC,EAAOC,EAAMC,EAAU,GAAI,CACzD,GAAI,CAYA,OAXiB,MAAMC,EAAM,IAAIL,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAUC,CACb,CACb,CAAS,GACe,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACT,CACL,CCpBO,SAASC,EAAaC,EAAQC,EAAS,CAC1C,MAAMC,EAASF,EAAO,IAAIG,GAAS;AAAA;AAAA,uBAEhBA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,oDAGdA,EAAM,KAAK;AAAA,oDACXA,EAAM,KAAK;AAAA,uDACRA,EAAM,QAAQ;AAAA,wDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,KAGlE,EAAE,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,EAC7B,IAAIE,EAAe,aAAc,CAAE,aAAc,MAAO,aAAc,GAAG,CAAE,EACnF,QAAO,CACpB,CCjBA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CJ,EAAU,SAAS,cAAc,UAAU,EAC3CK,EAAiB,SAAS,cAAc,YAAY,EACpDC,EAAmB,SAAS,cAAc,UAAU,EAE1D,IAAIC,EAAc,EACdC,EAAe,GACnB,MAAMb,EAAU,GAEhBS,EAAK,iBAAiB,SAAU,MAAOK,GAAM,CACzCA,EAAE,eAAc,EAChBD,EAAeC,EAAE,OAAO,SAAS,MAAM,MAAM,OAC7CF,EAAc,EACdP,EAAQ,UAAY,GACpBK,EAAe,UAAU,IAAI,QAAQ,EACjCG,IAAiB,IAErB,MAAME,EAAiB,CAC3B,CAAC,EAEDL,EAAe,iBAAiB,QAASK,CAAiB,EAE1D,eAAeA,GAAoB,CAC/B,GAAI,CACAJ,EAAiB,UAAU,OAAO,QAAQ,EAC1C,MAAMK,EAAO,MAAMnB,EAAYgB,EAAcD,EAAaZ,CAAO,EAEjE,GAAIgB,EAAK,KAAK,SAAW,GAAKJ,IAAgB,EAAG,CAC7C,MAAM,gDAAgD,EACtD,MACH,CAEDT,EAAaa,EAAK,KAAMX,CAAO,EAC/BO,GAAe,EAEXA,EAAc,KAAK,KAAKI,EAAK,UAAYhB,CAAO,GAChDU,EAAe,UAAU,IAAI,QAAQ,EACrC,MAAM,4DAA4D,GAElEA,EAAe,UAAU,OAAO,QAAQ,EAG5CO,GACH,OAAQf,EAAO,CACZ,QAAQ,MAAMA,CAAK,CAC3B,QAAc,CACNS,EAAiB,UAAU,IAAI,QAAQ,CAC1C,CACL,CAEA,SAASM,GAAe,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAKb,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACZ,IAAKa,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}